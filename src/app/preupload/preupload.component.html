<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button [text]="''"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ length }}个文件(共{{ size | fileSize }})</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="save()">
        <ion-icon name="save"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content #content>
  <div class="container">
    <div
      *ngFor="let item of preuploadService.data; trackBy: trackItems;let i=index"
      class="item"
      [attr.item-id]="item.id"
    >
      <ion-card>
        <div
          class="img-container"
          routerLink="edit"
          [queryParams]="{ index: i }"
        >
        <!-- <div
          class="img-container"
          routerLink="/opencv-test"
          [queryParams]="{ id: item.id }"
        > -->
          <img [blob-src]="item.dest || item.blob" />
        </div>
        <!-- <ion-thumbnail
          routerLink="edit"
          [queryParams]="{ id: item.id }"
        >
          <img [blob-src]="item.blob" />
        </ion-thumbnail> -->
        <a class="remove-btn" (click)="remove(item)">
          <ion-icon name="close"></ion-icon>
        </a>

        <!-- <ion-card-header>
          <ion-card-subtitle>Destination</ion-card-subtitle>
          <ion-card-title>Madison, WI</ion-card-title>
        </ion-card-header> -->
        <ion-card-content (click)="rename(item)">
          <ion-input
            #nameInput
            *ngIf="renameId === item.id"
            [ngModel]="item.name"
            enterkeyhint="done"
            (ngModelChange)="editName = $event"
            (ionBlur)="renameEnd(item)"
            (keydown)="onKeydown(item, $event)"
          ></ion-input>
          <ng-container *ngIf="renameId !== item.id">
            {{ item.name }}.jpg</ng-container
          >
        </ion-card-content>
      </ion-card>
      <!-- <div class="image-container">
        <img  appDbImage table="preuploadFile" [index]="item.id">
      </div>
      <div class="">

      </div> -->
    </div>
  </div>
</ion-content>
<div class="update-mask" *ngIf="uploading">
  <div class="progress-container">
    <ion-progress-bar
      [value]="uploaded / preuploadService.data.length"
    ></ion-progress-bar>
    <div>{{ uploaded }}/{{ preuploadService.data.length }}</div>
  </div>
</div>
